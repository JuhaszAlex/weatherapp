(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{187:function(e,t,a){e.exports=a(450)},192:function(e,t,a){},335:function(e,t,a){},446:function(e,t,a){},450:function(e,t,a){"use strict";a.r(t);var n=a(1),s=a.n(n),r=a(47),i=a.n(r),c=(a(192),a(18)),o=a(19),l=a(21),m=a(20),u=a(22),p=a(24),h=a(79),f=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).change=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.onSubmitSignIn=function(){if(a.state.name&&a.state.password){var e={name:a.state.name,password:a.state.password};a.props.loadUser(e)}else a.setState({errormsg:"Enter your username and password please"}),setTimeout(function(){this.setState({errormsg:!1})}.bind(Object(p.a)(Object(p.a)(a))),3e3)},a.onSubmitRegister=function(){if(a.state.name&&a.state.password){var e={name:a.state.name,password:a.state.password};a.props.registerUser(e)}else a.setState({errormsg:"Enter your username and password please"}),setTimeout(function(){this.setState({errormsg:!1})}.bind(Object(p.a)(Object(p.a)(a))),3e3)},a.afterEnter=function(e){13===e.charCode&&a.onSubmitSignIn()},a.state={name:"",password:"",errormsg:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("article",{className:"br3 ba b--black-10 mv4 w-100 w-50-m mw6 shadow-2 center"},s.a.createElement("main",{className:"pa4 black-80"},s.a.createElement("div",{className:"measure"},s.a.createElement("fieldset",{id:"sign_up",className:"ba b--transparent ph0 mh0"},s.a.createElement("legend",{className:"f1 fw6 ph0 mh0"},"Sign In"),s.a.createElement("div",{className:"mt3"},s.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"name"},"Name"),s.a.createElement("input",{className:"pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"text",name:"name",id:"name",onChange:function(t){return e.change(t)},onKeyPress:this.afterEnter})),s.a.createElement("div",{className:"mv3"},s.a.createElement("label",{className:"db fw6 lh-copy f6",htmlFor:"password"},"Password"),s.a.createElement("input",{className:"b pa2 input-reset ba bg-transparent hover-bg-black hover-white w-100",type:"password",name:"password",id:"password",onChange:function(t){return e.change(t)},onKeyPress:this.afterEnter}))),s.a.createElement("div",null,s.a.createElement("input",{onClick:this.onSubmitSignIn,className:"b ph3 mh2 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Sign in"}),s.a.createElement("input",{onClick:this.onSubmitRegister,className:"b ph3 mh2 pv2 input-reset ba b--black bg-transparent grow pointer f6 dib",type:"submit",value:"Register"})),this.state.errormsg.length?s.a.createElement("p",{className:"tc red"},this.state.errormsg):null)))}}]),t}(s.a.Component),d=a(107),g=a.n(d),b=a(170),y=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).change=function(e){a.setState(Object(h.a)({},e.target.name,e.target.value))},a.onGetWeather=function(){if(a.state.cityname.length>=2){var e=a.state.cityname;a.props.loadWeather(e)}else a.setState({errormsg:!0}),setTimeout(function(){this.setState({errormsg:!1})}.bind(Object(p.a)(Object(p.a)(a))),3e3)},a.afterEnter=function(e){13===e.charCode&&a.onGetWeather()},a.state={cityname:"",errormsg:!1},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("article",null,s.a.createElement("main",{className:"pa4 black-80 bg-white"},s.a.createElement("div",{className:"measure"},s.a.createElement("fieldset",{id:"add_new",className:"ba b--transparent ph0 mh0"},s.a.createElement("div",{className:"mt3 tc"},s.a.createElement("label",{className:"db fw6 lh-copy f4 tc",htmlFor:"cityname"},"Enter a city name!"),s.a.createElement("input",{className:"pa2 input-reset ba tc",type:"text",name:"cityname",id:"cityname",placeholder:"City...",onChange:function(t){return e.change(t)},onKeyPress:this.afterEnter}),s.a.createElement("button",{className:"grow f5 link ph3 pv2 dib white bg-light-purple",onClick:this.onGetWeather},"Submit"))),this.state.errormsg.length>0?s.a.createElement("p",{className:"tc red"},"Please enter a city name."):null)))}}]),t}(s.a.Component),v=a(186),S=a(184),E=a.n(S),w=a(185),N=a.n(w),O=a(112),j=a.n(O),C=a(182),k=a.n(C),J=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",null,s.a.createElement("div",{className:"flex justify-end"},this.props.city&&s.a.createElement("button",{className:"pointer f4 pv2 ph2 link dib white br3 bg-purple",onClick:function(){return e.props.removeCity()}},"Remove")),s.a.createElement("div",{className:"fw6"},this.props.city&&s.a.createElement("p",{className:""},"Location:",s.a.createElement("span",{className:""},"  ",this.props.city)),this.props.temperature&&s.a.createElement("p",{className:""},"Temperature:",s.a.createElement("span",{className:""},"  ",this.props.temperature)),this.props.humidity&&s.a.createElement("p",{className:""},"Humidity:",s.a.createElement("span",{className:""},"  ",this.props.humidity)),this.props.pressure&&s.a.createElement("p",{className:""},"Pressure:",s.a.createElement("span",{className:""},"  ",this.props.pressure)),this.props.speed&&s.a.createElement("p",{className:""},"Wind speed:",s.a.createElement("span",{className:""},"  ",this.props.speed)),this.props.deg&&s.a.createElement("p",{className:""},"Wind direction (deg):",s.a.createElement("span",{className:""},"  ",this.props.deg))))}}]),t}(s.a.Component),A=a(453),x=a(455),W=a(451),I=a(454),U=a(326),R=a(327),D=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return s.a.createElement("div",null,s.a.createElement("h3",null,"Five day forecast of daily temperatures:"),s.a.createElement("div",{className:"flex justify-center"},s.a.createElement(A.a,{width:"60%",aspect:1.6},s.a.createElement(x.a,{data:this.props.data},s.a.createElement(W.a,{type:"monotone",dataKey:"uv",stroke:"#8884d8"}),s.a.createElement(I.a,{stroke:"#ccc"}),s.a.createElement(U.a,{dataKey:"pv"}),s.a.createElement(R.a,null)))))}}]),t}(n.Component),P=a(111),T=a.n(P);a(335);function q(e){return s.a.createElement(k.a,{component:"div",style:{padding:24}},e.children)}var K="2877f503d24cc81bc9fc5f0b4a57f56c",F=function(e){function t(e){var a;return Object(c.a)(this,t),(a=Object(l.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e,t){t===a.state.citynames.length?a.setState({isActive:!0}):a.setState({value:t})},a.handleClose=function(){a.setState({isActive:!1})},a.getWeather=function(){var e=Object(b.a)(g.a.mark(function e(t){var n,s,r,i,c,o,l,m,u,p,h,f,d,b,y,v;return g.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,!(s=localStorage.getItem("weatherDb"+a.state.username))){e.next=25;break}if(r=JSON.parse(s),!(r.filter(function(e){return e.city.includes(n)}).length>0)){e.next=10;break}a.setState({isActive:!1}),a.props.noCityError("This city is already presented below."),e.next=23;break;case 10:return e.next=12,fetch("http://api.openweathermap.org/data/2.5/weather?q=".concat(n,"&units=metric&appid=").concat(K));case 12:return i=e.sent,e.next=15,fetch("http://api.openweathermap.org/data/2.5/forecast?q=".concat(n,"&units=metric&cnt=5&appid=").concat(K));case 15:return c=e.sent,e.next=18,i.json();case 18:return o=e.sent,e.next=21,c.json();case 21:l=e.sent,o.main?(m={temperature:o.main.temp,city:o.name,humidity:o.main.humidity,pressure:o.main.pressure,speed:o.wind.speed,deg:o.wind.deg,fivedays:l.list.map(function(e){return Number(e.main.temp)})},r.push(m),u=Array.from(new Set(r.map(JSON.stringify))).map(JSON.parse),localStorage.setItem("weatherDb"+a.state.username,JSON.stringify(u)),a.setState({info:u}),p=u.map(function(e){return e.city}),h=Array.from(new Set(p.map(JSON.stringify))).map(JSON.parse),a.setState({citynames:h}),a.setState({isActive:!1}),console.log(a.state.info)):(a.setState({isActive:!1}),a.props.noCityError("No such city found"));case 23:e.next=38;break;case 25:return e.next=27,fetch("http://api.openweathermap.org/data/2.5/weather?q=".concat(n,"&units=metric&appid=").concat(K));case 27:return f=e.sent,e.next=30,fetch("http://api.openweathermap.org/data/2.5/forecast?q=".concat(n,"&units=metric&cnt=5&appid=").concat(K));case 30:return d=e.sent,e.next=33,f.json();case 33:return b=e.sent,e.next=36,d.json();case 36:y=e.sent,b.main?(v={temperature:b.main.temp,city:b.name,humidity:b.main.humidity,pressure:b.main.pressure,speed:b.wind.speed,deg:b.wind.deg,fivedays:y.list.map(function(e){return Number(e.main.temp)})},localStorage.setItem("weatherDb"+a.state.username,JSON.stringify([v])),a.setState({info:[v]}),a.setState({citynames:[v.city]}),a.setState({isActive:!1}),console.log(a.state.info)):(a.setState({isActive:!1}),a.props.noCityError("No such city found"));case 38:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),a.createCoordinates=function(){if(a.state.info[a.state.value].fivedays){for(var e=a.state.info[a.state.value].fivedays,t=[],n=1;n<=e.length;n++)t.push(n);for(var s=[],r=0;r<e.length;r++){var i=t[r],c=e[r];s.push({pv:i,uv:c})}return s}return null},a.removeCity=function(){if(1===a.state.info.length)a.setState({info:[!1]}),a.setState({citynames:[]}),localStorage.removeItem("weatherDb"+a.state.username);else{a.state.info.splice(a.state.value,1),a.state.citynames.splice(a.state.value,1),a.setState({info:a.state.info}),a.setState({citynames:a.state.citynames}),a.setState({value:a.state.citynames.length-1});var e=Array.from(new Set(a.state.info.map(JSON.stringify))).map(JSON.parse);localStorage.setItem("weatherDb"+a.state.username,JSON.stringify(e)),console.log(a.state.citynames)}},a.state={info:[!1],value:0,citynames:[],isActive:!1,username:a.props.username,errormsg:""},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){T.a.setAppElement("body");var e=localStorage.getItem("weatherDb"+this.state.username);if(e){var t=JSON.parse(e);this.setState({info:t});var a=t.map(function(e){return e.city}),n=Array.from(new Set(a.map(JSON.stringify))).map(JSON.parse);this.setState({citynames:n})}else console.log("No citys yet")}},{key:"componentWillUnmount",value:function(){this.setState({info:!1})}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.value;return s.a.createElement("div",{className:"Mainpage"},s.a.createElement("div",{className:"col-sm-12"},s.a.createElement(T.a,Object.assign({},this.props,{isOpen:this.state.isActive,onRequestClose:function(){return e.handleClose()},className:"Modal br3 bg-white b--black-10 mt2 w-100 w-50-m mw6 shadow-2 center",open:this.state.isActive,onClose:this.handleClose},this.props),s.a.createElement(y,{loadWeather:function(t){return e.getWeather(t)}}))),s.a.createElement("div",{className:t.root},s.a.createElement(E.a,{position:"static"},s.a.createElement(N.a,{value:a,onChange:this.handleChange},this.state.citynames.map(function(e,t){return s.a.createElement(j.a,{label:e,key:t})}),s.a.createElement(j.a,{style:{fontSize:30},label:"+"}))),s.a.createElement(q,null,s.a.createElement("div",{className:"dib w-100"},s.a.createElement(J,{removeCity:this.removeCity,temperature:this.state.info[this.state.value].temperature,city:this.state.info[this.state.value].city,humidity:this.state.info[this.state.value].humidity,pressure:this.state.info[this.state.value].pressure,speed:this.state.info[this.state.value].speed,deg:this.state.info[this.state.value].deg}),this.state.info[this.state.value].city?s.a.createElement(D,{data:this.createCoordinates()}):null))))}}]),t}(n.Component),G=Object(v.withStyles)(function(e){return{root:{flexGrow:1,width:"auto",backgroundColor:"#ffffff00",outline:"none"}}})(F),M=function(e){function t(){var e,a;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return(a=Object(l.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(s)))).signOut=function(){a.props.onRouteChange("signin")},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"w-100"},s.a.createElement("div",{className:"dib flex justify-end"},s.a.createElement("nav",{style:{display:"flex",justifyContent:"flex-end"}},s.a.createElement("p",{onClick:function(){return e.signOut()},className:"f4 link dim black underline pr4 pointer"},"Sign Out"))),s.a.createElement("div",{className:""},s.a.createElement("h1",{className:"f1"},"Weather App"),s.a.createElement("h3",null,this.props.welcome),s.a.createElement("div",null,this.props.noCityError?s.a.createElement("h3",{className:"red"},this.props.noCityError):s.a.createElement("h3",null,"Add a new city to check the local weather"))))}}]),t}(n.Component),B=(a(446),function(e){function t(){var e;return Object(c.a)(this,t),(e=Object(l.a)(this,Object(m.a)(t).call(this))).noCityError=function(t){e.setState({nocityerror:t}),setTimeout(function(){this.setState({nocityerror:!1})}.bind(Object(p.a)(Object(p.a)(e))),3e3)},e.onRouteChange=function(t){e.setState({route:t})},e.loadUser=function(t){var a=localStorage.getItem("account");if(a)for(var n=JSON.parse(a),s=0;s<n.length;s++)n[s].name===t.name&&n[s].password===t.password&&(e.setState({route:"main"}),e.setState({welcome:"Welcome back again "+t.name}),e.setState({username:t.name}),localStorage.setItem("lastAccount",JSON.stringify(t)));else console.log("Wrong username or password.")},e.registerUser=function(t){var a=localStorage.getItem("account");if(a){var n=JSON.parse(a);if(n.filter(function(e){return e.name.includes(t.name)}).length>0)console.log("Username is already in use.");else{n.push(t);var s=Array.from(new Set(n.map(JSON.stringify))).map(JSON.parse);localStorage.setItem("account",JSON.stringify(s)),e.setState({route:"main"}),e.setState({welcome:"Welcome new user "+t.name}),e.setState({username:t.name}),localStorage.setItem("lastAccount",JSON.stringify(t))}}else localStorage.setItem("account",JSON.stringify([t])),e.setState({route:"main"}),e.setState({welcome:"Welcome new user "+t.name}),e.setState({username:t.name}),localStorage.setItem("lastAccount",JSON.stringify(t))},e.state={route:"signin",welcome:"",username:"",nocityerror:!1},e}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=localStorage.getItem("lastAccount");if(e){var t=JSON.parse(e);this.setState({route:"main"}),this.setState({welcome:"Welcome back "+t.name}),this.setState({username:t.name})}}},{key:"render",value:function(){return s.a.createElement("div",{className:"App"},"main"===this.state.route?s.a.createElement("div",null,s.a.createElement(M,{onRouteChange:this.onRouteChange,welcome:this.state.welcome,noCityError:this.state.nocityerror}),s.a.createElement(G,{noCityError:this.noCityError,username:this.state.username})):s.a.createElement(f,{loadUser:this.loadUser,registerUser:this.registerUser}))}}]),t}(n.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a(448);i.a.render(s.a.createElement(B,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[187,2,1]]]);
//# sourceMappingURL=main.274fbe5b.chunk.js.map